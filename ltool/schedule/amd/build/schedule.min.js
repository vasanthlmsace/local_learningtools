define ("ltool_schedule/schedule",["core/fragment","core/modal_factory","core/str","core/modal_events","core/notification"],function(a,b,c,d,e){var f=function(a){var b=this,c=document.querySelector(".ltoolschedule-info #ltoolschedule-action");if(c){var d=c.getAttribute("data-hovercolor"),e=c.getAttribute("data-fontcolor");if(d&&e){c.addEventListener("mouseover",function(){document.querySelector("#ltoolschedule-info p").style.background=d;document.querySelector("#ltoolschedule-info p").style.color=e})}c.addEventListener("click",function(){b.displaySchedulebox(a)})}};f.prototype.displaySchedulebox=function(a){var f=this,g=c.get_string("schedule","local_learningtools");return b.create({title:g,type:b.types.SAVE_CANCEL,body:f.getScheduleAction(a),large:!0}).then(function(b){b.getRoot().on(d.save,function(a){a.preventDefault();$(a.target).find("button[data-action=save]").attr("disabled",!0);b.getRoot().find("form").submit()});b.getRoot().on("submit","form",function(d){d.preventDefault();var g=document.querySelectorAll("#ltoolschedule-editorbox input[name='schedulename']")[0];if(g.value){f.submitFormData(a.contextid);var h=c.get_string("successtoolschedule","local_learningtools");$.when(h).done(function(a){e.addNotification({message:a,type:"success"})});if(0!=ltools.disappertimenotify){setTimeout(function(){document.querySelector("span.notifications").innerHTML=""},ltools.disappertimenotify)}}b.hide()});b.getRoot().on(d.hidden,function(){b.destroy()});b.show();return b}).fail(e.exception)};f.prototype.submitFormData=function(b){var c=document.querySelectorAll("#ltoolschedule-editorbox form")[0],d=new URLSearchParams(new FormData(c)).toString();a.loadFragment("ltool_schedule","set_calendar_event",b,{formdata:d});return!0};f.prototype.getScheduleAction=function(b){return a.loadFragment("ltool_schedule","get_schedule_form",b.contextid,b)};return{init:function init(a){return new f(a)}}});
//# sourceMappingURL=schedule.min.js.map
